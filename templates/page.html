{% extends "index.html" %}

{% block content %}
{# Removed explicit H1 to avoid duplication with markdown headers #}
{{ page.content | safe }}
{% endblock content %}

{% block prev_link %}
{% if page.lower %}
<a class="previous" href="{{ page.lower.permalink | safe }}">&lt;</a>
{% else %}
{# No page before, find the link for the section it's in if there is one #}
{% set parent = get_section(path=page.ancestors | reverse | first) %}
<a class="previous" href="{{ parent.permalink | safe }}">&lt;</a>
{% endif %}
{% endblock prev_link %}

{% block next_link %}
{% if page.higher %}
<a class="next" href="{{ page.higher.permalink | safe }}">&gt;</a>
{% else %}
{# No page after, find the link for the following section #}
{% set index = get_section(path="_index.md") %}
{% set found_current = false %}
{% for s in index.subsections %}
{% set subsection = get_section(path=s) %}
{% if found_current %}
<a class="next" href="{{ subsection.permalink | safe }}">&gt;</a>
{# no break #}
{% set_global found_current = false %}
{% endif %}
{% for p in subsection.pages %}
{% if p.permalink == page.permalink %}
{% set_global found_current = true %}
{% endif %}
{% endfor %}
{% endfor %}
{% endif %}
{% endblock next_link %}